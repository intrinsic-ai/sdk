// Copyright 2023 Intrinsic Innovation LLC

syntax = "proto3";

package intrinsic_proto.services.v1;

import "google/protobuf/any.proto";
import "google/protobuf/timestamp.proto";

option go_package = "intrinsic/assets/services/proto/v1/service_inspection_go_proto";

// Configuration needed to enable inspection for a service.
message ServiceInspectionConfig {
  // Full name of the protobuf message that a service uses to publish
  // inspection data.
  //
  // The full descriptor set for this message must be included in the file
  // descriptor set in the manifest's ServiceAssets, i.e. add the proto target
  // for this message to the `deps` of the `intrinsic_service` rule of the
  // service.
  string data_proto_message_full_name = 1;
}

// Data published by a service as inspection data. The service is expected
// to publish this data at regular intervals and provide the custom data in the
// `data` field. The topic name for each individual service is
// `/service_inspection/services/<service_instance_name>`.
message ServiceInspectionData {
  // The data payload of the inspection message.
  google.protobuf.Any data = 1;
  // The timestamp of the data, when the data was measured. If that is not
  // possible, the timestamp of when the data was published should be used.
  google.protobuf.Timestamp timestamp = 2;
}
